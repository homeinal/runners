generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Race {
  id    String @id @default(cuid())
  title String

  // Source
  sourceUrl String? @unique @map("source_url") // 크롤링 원본 URL

  // Date & Time
  eventDate DateTime @map("event_date")
  eventTime String?  @map("event_time")

  // Location
  country String
  region  String?
  venue   String?

  // Registration Info
  registrationStatus String    @map("registration_status") // "접수 중", "접수 예정", "마감"
  registrationStart  DateTime? @map("registration_start")
  registrationEnd    DateTime? @map("registration_end")

  // Event Info
  categories   String[] // ["10km", "5km", "하프마라톤", "풀마라톤"]
  organizer    String?
  organizerRep String?  @map("organizer_rep") // 대표자

  // Contact
  phone   String?
  email   String?
  website String?

  // Images
  imageUrl String? @map("image_url")

  // Features
  isFeatured Boolean @default(false) @map("is_featured")
  isUrgent   Boolean @default(false) @map("is_urgent") // 24시간 내 마감

  // Metadata
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([eventDate])
  @@index([registrationStatus])
  @@index([isFeatured])
  @@index([country])
  @@index([region])
  @@map("races")
}
